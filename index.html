<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Event Notifier</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: #111; color: #eee; }
  button { padding: 10px 20px; font-size: 16px; margin-top: 20px; cursor: pointer; }
</style>
</head>
<body>
<h1>Event Notifier</h1>
<p>Enxtinct Event: Every 2 hours</p>
<p>Galaxy Event: Every 1 hour</p>
<button id="settingsBtn">Settings</button>

<audio id="klingel" src="https://www.soundjay.com/button/sounds/button-16.mp3" preload="auto"></audio>

<script>
const klingel = document.getElementById('klingel');

// Request notification permission
function requestNotificationPermission() {
    if (Notification.permission !== "granted") {
        Notification.requestPermission();
    }
}

// Play sound and send notification
function notify(eventName) {
    klingel.play();
    if (Notification.permission === "granted") {
        new Notification(eventName, { body: 'Time for the ' + eventName + '!', silent: false });
    }
}

// Calculate next trigger based on interval and local time
function scheduleEvent(eventName, intervalHours) {
    const now = new Date();
    const next = new Date();
    next.setHours(Math.floor(now.getHours() / intervalHours) * intervalHours + intervalHours, 0, 0, 0);
    let delay = next - now;
    if (delay < 0) delay += intervalHours * 3600000; // fix if negative
    
    setTimeout(function tick() {
        notify(eventName);
        setTimeout(tick, intervalHours * 3600000); // repeat
    }, delay);
}

// Setup events
requestNotificationPermission();
scheduleEvent("Enxtinct Event", 2);
scheduleEvent("Galaxy Event", 1);

// Settings button (dummy for now, can expand)
document.getElementById('settingsBtn').addEventListener('click', () => {
    alert('Settings can be added here!');
});
</script>
</body>
</html>
