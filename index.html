<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Event Notifier</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: #111; color: #eee; }
  button { padding: 10px 20px; font-size: 16px; margin-top: 20px; cursor: pointer; }
  .countdown { font-size: 24px; margin: 20px 0; }
  label { display: block; margin: 10px 0; }
  #settings { text-align:left; max-width:300px; margin:auto; background:#222; padding:20px; border-radius:10px; }
</style>
</head>
<body>
<h1>Event Notifier</h1>

<div class="countdown" id="enxtinctCountdown">Next Enxtinct Event in: --:--:--</div>
<div class="countdown" id="galaxyCountdown">Next Galaxy Spin in: --:--:--</div>

<p>Enxtinct Event: Every 2 hours</p>
<p>Galaxy Spin: Every 1 hour</p>
<button id="settingsBtn">Settings</button>

<div id="settings" style="display:none; margin-top:20px;">
  <h3>Settings</h3>
  <label><input type="checkbox" id="enxtinctSound" checked> Enable Enxtinct Event Sound</label>
  <label><input type="checkbox" id="galaxySound" checked> Enable Galaxy Spin Sound</label>
  <button id="closeSettings">Close</button>
</div>

<audio id="klingel" src="https://www.soundjay.com/button/sounds/button-16.mp3" preload="auto"></audio>

<script>
const klingel = document.getElementById('klingel');
const enxtinctCountdownEl = document.getElementById('enxtinctCountdown');
const galaxyCountdownEl = document.getElementById('galaxyCountdown');

// User settings
let settings = {
  enxtinct: true,
  galaxy: true
};

// Request notification permission
function requestNotificationPermission() {
    if (Notification.permission !== "granted") {
        Notification.requestPermission();
    }
}

// Play sound and send notification
function notify(eventName, enabled) {
    if (enabled) klingel.play();
    if (Notification.permission === "granted") {
        new Notification(eventName, { body: 'Time for the ' + eventName + '!', silent: false });
    }
}

// Schedule event with interval in hours
function scheduleEvent(eventName, intervalHours, enabled) {
    const now = new Date();
    const next = new Date();
    next.setHours(Math.floor(now.getHours() / intervalHours) * intervalHours + intervalHours, 0, 0, 0);
    let delay = next - now;
    if (delay < 0) delay += intervalHours * 3600000;
    
    setTimeout(function tick() {
        notify(eventName, enabled());
        setTimeout(tick, intervalHours * 3600000);
    }, delay);
}

// Countdown function
function updateCountdown(countdownEl, intervalHours) {
    const now = new Date();
    const next = new Date();
    next.setHours(Math.floor(now.getHours() / intervalHours) * intervalHours + intervalHours, 0, 0, 0);
    let diff = next - now;
    if (diff < 0) diff += intervalHours * 3600000;
    
    const hours = String(Math.floor(diff / 3600000)).padStart(2,'0');
    const minutes = String(Math.floor((diff % 3600000)/60000)).padStart(2,'0');
    const seconds = String(Math.floor((diff % 60000)/1000)).padStart(2,'0');
    countdownEl.textContent = `Next ${countdownEl.id.includes("enxtinct") ? "Enxtinct Event" : "Galaxy Spin"} in: ${hours}:${minutes}:${seconds}`;
}

// Update both countdowns every second
setInterval(() => {
    updateCountdown(enxtinctCountdownEl, 2);
    updateCountdown(galaxyCountdownEl, 1);
}, 1000);

// Event scheduling
requestNotificationPermission();
scheduleEvent("Enxtinct Event", 2, () => settings.enxtinct);
scheduleEvent("Galaxy Spin", 1, () => settings.galaxy);

// Settings button
document.getElementById('settingsBtn').addEventListener('click', () => {
    document.getElementById('settings').style.display = 'block';
});
document.getElementById('closeSettings').addEventListener('click', () => {
    settings.enxtinct = document.getElementById('enxtinctSound').checked;
    settings.galaxy = document.getElementById('galaxySound').checked;
    document.getElementById('settings').style.display = 'none';
});
</script>
</body>
</html>
